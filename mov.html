<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Movimientos - inventario</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="/icono.png" />
    <link rel="stylesheet" href="/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/styles.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
  </head>

  <body class="bg-light">
    <div class="dashboard-layout d-flex min-vh-100">
      <aside class="dashboard-sidebar d-flex flex-column">
        <div class="sidebar-brand d-flex align-items-center mb-4">
          <img src="/icono.png" alt="gestioncom" class="sidebar-logo me-2" />
          <span class="sidebar-brand-text">gestioncom</span>
        </div>

        <nav class="sidebar-nav flex-grow-1" aria-label="Navegación principal">
          <a href="/perfilUsuario.html" class="sidebar-link">
            <i class="bi bi-person-circle me-2"></i> Perfil
          </a>
          <a href="/dashboard.html" class="sidebar-link">
            <i class="bi bi-speedometer2 me-2"></i> Panel
          </a>
          <a href="/productos.html" class="sidebar-link">
            <i class="bi bi-box-seam me-2"></i> Productos
          </a>
          <a href="/categorias.html" class="sidebar-link">
            <i class="bi bi-tags me-2"></i> Categorías
          </a>
          <a href="/usersCard.html" class="sidebar-link">
            <i class="bi bi-people me-2"></i> Usuarios
          </a>
          <a href="/movimientos.html" class="sidebar-link active">
            <i class="bi bi-arrow-left-right me-2"></i> Movimientos
          </a>
          <a
            href="/usersAdmin.html"
            class="sidebar-link d-none"
            data-role="admin-only"
          >
            <i class="bi bi-shield-lock me-2"></i> Usuarios Admin
          </a>
        </nav>
      </aside>

      <main class="dashboard-main">
        <div
          class="d-flex justify-content-between align-items-center mb-4 dashboard-header"
        >
          <div>
            <h1 class="h3 mb-1">Historial de movimientos</h1>
            <p class="dashboard-welcome text-muted mb-0">
              Consulta entradas y salidas del inventario.
            </p>
          </div>
          <button id="logout-btn" class="btn btn-outline-danger btn-sm">
            Cerrar sesión
          </button>
        </div>

        <section class="mb-3">
          <div class="card">
            <div class="card-body">
              <form
                id="filter-form"
                class="row gy-2 gx-3 align-items-end"
                autocomplete="off"
              >
                <div class="col-12 col-md-4">
                  <label for="filter-text" class="form-label mb-1"
                    >Buscar (producto / usuario)</label
                  >
                  <input
                    type="text"
                    id="filter-text"
                    class="form-control form-control-sm"
                    placeholder="EJ: Jordi Admin"
                  />
                </div>

                <div class="col-6 col-md-2">
                  <label for="order-by" class="form-label mb-1"
                    >Ordenar por</label
                  >
                  <select
                    id="filter-order-by"
                    class="form-select form-select-sm"
                  >
                    <option value="fecha">Fecha</option>
                    <option value="tipo">Tipo</option>
                    <option value="usuario">Usuario</option>
                    <option value="producto">Producto</option>
                  </select>
                </div>

                <div class="col-6 col-md-2">
                  <label for="filter-order-dir" class="form-label mb-1"
                    >Orden</label
                  >
                  <select
                    id="filter-order-dir"
                    class="form-select form-select-sm"
                  >
                    <option value="DESC">Más recientes</option>
                    <option value="ASC">Más antiguos</option>
                  </select>
                </div>

                <div class="col-6 col-md-2">
                  <label for="filter-limit" class="form-label mb-1"
                    >Por página</label
                  >
                  <select id="filter-limit" class="form-select form-select-sm">
                    <option value="10">10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                    <option value="100">100</option>
                  </select>
                </div>
                <div class="col-6 col-md-2 text-md-end">
                  <button
                    type="button"
                    id="exportar-csv"
                    class="btn btn-outline-secondary btn-sm w-100 w-md-auto"
                  >
                    <i class="bi bi-download me-1"></i>
                    Exportar CSV
                  </button>
                </div>
              </form>
            </div>
          </div>
        </section>

        <!-- Tabla -->
        <section>
          <div class="card">
            <div class="card-body">
              <div
                class="d-flex justify-content-between align-items-center mb-2"
              >
                <h2 class="h6 mb-0">Listado de movimientos</h2>
              </div>

              <div class="table-responsive">
                <table
                  class="table table-sm align-middle"
                  id="movimientos-table"
                >
                  <thead>
                    <tr>
                      <th scope="col">Fecha</th>
                      <th scope="col">Producto</th>
                      <th scope="col">Tipo</th>
                      <th scope="col">Cantidad</th>
                      <th scope="col">Usuario</th>
                      <th scope="col">Nota</th>
                    </tr>
                  </thead>
                  <tbody id="movimientos-tbody">
                    <!-- filas  -->
                  </tbody>
                </table>
              </div>

              <div
                class="d-flex justify-content-between align-items-center mt-2"
              >
                <div class="text-muted small" id="paging-info">Página 1</div>
                <div class="btn-group btn-group-sm" role="group">
                  <button
                    type="button"
                    class="btn btn-outline-secondary"
                    id="btn-prev"
                  >
                    <i class="bi bi-chevron-left"></i>
                  </button>
                  <button
                    type="button"
                    class="btn btn-outline-secondary"
                    id="btn-next"
                  >
                    <i class="bi bi-chevron-right"></i>
                  </button>
                </div>
              </div>

              <div
                id="movimientos-error"
                class="text-danger small mt-2 d-none"
              ></div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <footer class="dashboard-footer text-center py-3">
      <a
        class="footer-brand text-decoration-none"
        href="https://www.instagram.com/jordiv.1/"
        target="_blank"
        rel="noopener noreferrer"
      >
        © 2025 – Desarrollado por <span class="fw-semibold">Jordi Velasco</span>
        <br />
        <i class="bi bi-instagram me-1"></i>
        <span>jordiv.1</span>
      </a>
    </footer>
    <script type="module" src="/src/pages/movPage.js"></script>
  </body>
</html>
